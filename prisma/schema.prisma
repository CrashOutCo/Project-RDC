// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

/////////////////////////
// Project RDC Models   
// Player IDS         
// 1. Mark 
// 2. Aff
// 3. Ben 
// 4. Des
// 5. Lee
// 6. Dyl 
// 7. John 
// 8. Ippi 
//////////////////////

// {player_id: 1, player_name: "Mark", player_game_stats: []}
model Player {
  player_id       Int          @id @default(autoincrement()) @map("player_id")
  playerName      String       @map("player_name")
  playerGameStats PlayerStat[]

  @@map("players")
}

//
// { game_id: 1, game_name: 'Mario Kart', game_stats: [], player_game_stats: [] }
model Game {
  gameID      Int          @id @default(autoincrement()) @map("game_id")
  gameName    String       @map("game_name")
  gameStats   GameStat[]
  playerStats PlayerStat[]

  @@map("games")
}

// { stat_id: 1, game_id: 1, stat_name: 'mk_first', stat_value: '0', date: 2024-10-23 12:00:00 }
model GameStat {
  statID            Int          @id @default(autoincrement()) @map("stat_id")
  gameID            Int          @map("game_id")
  statName          String       @map("stat_name")
  statValue         String       @map("stat_value")
  date              DateTime     @default(now()) // Date video posted
  game              Game         @relation(fields: [gameID], references: [gameID])
  player_game_stats PlayerStat[]

  @@map("game_stats")
}

// { player_game_stat_id: 1, player_id: 1, game_id: 1, stat_id: 1, value: }
model PlayerStat {
  playerGameStatID Int      @id @default(autoincrement()) @map("player_game_stat_id")
  playerID         Int      @map("player_id")
  gameID           Int      @map("game_id")
  statID           Int      @map("stat_id")
  value            String
  datePlayed       DateTime @map("date_play")
  player           Player   @relation(fields: [playerID], references: [player_id])
  game             Game     @relation(fields: [gameID], references: [gameID])
  game_stats       GameStat @relation(fields: [statID], references: [statID])

  @@map("player_stats")
}

// TODO: Consider Enum for RDC

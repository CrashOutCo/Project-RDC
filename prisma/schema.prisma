// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

/////////////////////////
// Project RDC Models   
// Player IdS         
// 1. Mark 
// 2. Aff
// 3. Ben 
// 4. Des
// 5. Lee
// 6. Dyl 
// 7. John 
// 8. Ippi 
//////////////////////

// {player_id: 1, player_name: "Mark", player_game_stats: []}
model Player {
  playerId        Int          @id @default(autoincrement()) @map("player_id")
  playerName      String       @map("player_name")
  playerGameStats PlayerStat[]

  @@map("players")
}

//
// { game_id: 1, game_name: 'Mario Kart', game_stats: [], player_game_stats: [] }
model Game {
  gameId      Int          @id @default(autoincrement()) @map("game_id")
  gameName    String       @map("game_name")
  gameStats   GameStat[]
  playerStats PlayerStat[]

  @@map("games")
}

// { stat_id: 1, game_id: 1, stat_name: 'mk_first', stat_value: '0', date: 2024-10-23 12:00:00 }
model GameStat {
  statId          Int          @id @default(autoincrement()) @map("stat_id")
  gameId          Int          @map("game_id")
  statName        String       @map("stat_name")
  statValue       String       @map("stat_value")
  date            DateTime     @default(now()) // Date video posted
  game            Game         @relation(fields: [gameId], references: [gameId])
  PlayerGameStats PlayerStat[]

  @@map("game_stats")
}

// { player_game_stat_id: 1, player_id: 1, game_id: 1, stat_id: 1, value: }
model PlayerStat {
  playerGameStatId Int      @id @default(autoincrement()) @map("player_game_stat_id")
  playerId         Int      @map("player_id")
  gameId           Int      @map("game_id")
  statId           Int      @map("stat_id")
  value            String
  datePlayed       DateTime @map("date_played")
  player           Player   @relation(fields: [playerId], references: [playerId])
  game             Game     @relation(fields: [gameId], references: [gameId])
  gameStat         GameStat @relation(fields: [statId], references: [statId])

  @@map("player_stats")
}

// TODO: Consider Enum for RDC
